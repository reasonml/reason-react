<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Routeur · ReasonReact</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="ReasonReact comes with a router! We&#x27;ve leveraged the language and library features in order to create a router that&#x27;s:"/><meta name="docsearch:language" content="fr"/><meta property="og:title" content="Routeur · ReasonReact"/><meta property="og:type" content="website"/><meta property="og:url" content="https://reasonml.github.io/reason-react/reason-react/"/><meta property="og:description" content="ReasonReact comes with a router! We&#x27;ve leveraged the language and library features in order to create a router that&#x27;s:"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/reason-react/img/reason-react-favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://reasonml.github.io/reason-react/reason-react/blog/atom.xml" title="ReasonReact Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://reasonml.github.io/reason-react/reason-react/blog/feed.xml" title="ReasonReact Blog RSS Feed"/><script type="text/javascript" src="/reason-react/js/pjax-api.min.js"></script><script src="/reason-react/js/scrollSpy.js"></script><link rel="stylesheet" href="/reason-react/css/main.css"/><script src="/reason-react/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/reason-react/fr"><img class="logo" src="/reason-react/img/reason-react-white.svg" alt="ReasonReact"/><h2 class="headerTitleWithLogo">ReasonReact</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/reason-react/docs/fr/installation" target="_self">Docs</a></li><li class=""><a href="/reason-react/docs/fr/playground" target="_self">Essayer</a></li><li class=""><a href="/reason-react/docs/fr/simple" target="_self">Exemples</a></li><li class=""><a href="/reason-react/docs/fr/community" target="_self">Communauté</a></li><li class=""><a href="/reason-react/blog/" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/reason-react/img/language.svg" alt="Languages icon"/>Français</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/reason-react/docs/ja/router-2">日本語</a></li><li><a href="/reason-react/docs/en/router-2">English</a></li><li><a href="/reason-react/docs/es-ES/router-2">Español</a></li><li><a href="/reason-react/docs/ko/router-2">한국어</a></li><li><a href="/reason-react/docs/pt-BR/router-2">Português (Brasil)</a></li><li><a href="/reason-react/docs/ru/router-2">Русский</a></li><li><a href="/reason-react/docs/zh-CN/router-2">中文</a></li><li><a href="/reason-react/docs/zh-Hant/router-2">繁體中文</a></li><li><a href="https://crowdin.com/project/reason-react" target="_blank" rel="noreferrer noopener">Aider à traduire</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/reasonml/reason-react" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Record API (deprecated)</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Mise en route</h3><ul class=""><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/what-and-why">Quoi &amp; Pourquoi</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/intro-example">Exemple d’introduction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Core</h3><ul class=""><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/components">Composants</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/jsx">JSX (Version 3)</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/event">Événements</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/style">Style</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/router">Routeur</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/dom">Travailler avec le DOM</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/refs">Refs in React</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/reasonreactcompat">ReasonReactCompat: migrating to 0.7.0 and JSX v3</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/testing">Testing ReasonReact components</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">ReactJS Idioms Equivalents</h3><ul class=""><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/invalid-prop-name">Invalid Prop Name</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/props-spread">Props Spread</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/component-as-prop">Composant en tant que Prop</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/ternary-shortcut">Ternary Shortcut</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/context-mixins">Contexte &amp; Mixins</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/custom-class-component-property">Custom Class/Component Property</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/usestate-event-value">Using Event Values With useState</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/error-boundaries">Error boundaries</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Record API (deprecated)</h3><ul class=""><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/jsx-2">JSX (Old, Version 2)</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/creation-props-self">Création, Props &amp; Self</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/render">Render</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/callback-handlers">Callback Handlers</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/state-actions-reducer">State, Actions &amp; Reducer</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/lifecycles">Cycles de vie</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/instance-variables">Variables d’instance</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/react-ref">React Ref</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/interop">Talk to Existing ReactJS Code</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/clone-element">cloneElement</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/children">Children</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/subscriptions-helper">Subscriptions Helper</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/reason-react/docs/fr/router-2">Routeur</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">FAQ</h3><ul class=""><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/im-having-a-type-error">J&#x27;ai une erreur de type</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/record-field-send-handle-not-found">Record Field send/handle Not Found</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/send-handle-callbacks-having-incompatible-types">send/handle callbacks having Incompatible Types</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/i-really-need-feature-x-from-reactjs">I Really Need Feature X From ReactJS</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/element-type-is-invalid">Element Type is Invalid Runtime Error</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/reason-react/fr" target="_blank" rel="noreferrer noopener">Translate</a><h1 class="postHeaderTitle">Routeur</h1></header><article><div><span><p>ReasonReact comes with a router! We've leveraged the language and library features in order to create a router that's:</p>
<ul>
<li>The simplest, thinnest possible.</li>
<li>Easily pluggable anywhere into your existing code.</li>
<li>Performant and tiny.</li>
</ul>
<p><a href="https://github.com/reasonml/reason-react/blob/master/src/ReasonReactRouter.rei">Here's the documented public interface</a>, repeated here:</p>
<ul>
<li><code>ReasonReactRouter.push(string)</code>: takes a new path and update the URL.</li>
<li><code>ReasonReactRouter.replace(string)</code>: like <code>push</code>, but replaces the current URL.</li>
<li><code>ReasonReactRouter.watchUrl(f)</code>: start watching for URL changes. Returns a subscription token. Upon url change, calls the callback and passes it the <code>ReasonReactRouter.url</code> record.</li>
<li><code>ReasonReactRouter.unwatchUrl(watcherID)</code>: stop watching for url changes.</li>
<li><code>ReasonReactRouter.dangerouslyGetInitialUrl()</code>: get <code>url</code> record outside of <code>watchUrl</code>. Described later.</li>
<li><code>ReasonReactRouter.useUrl(~serverUrl)</code>: only usable in the new <a href="https://reasonml.github.io/docs/en/components">function component api</a>.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="match-a-route"></a><a href="#match-a-route" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Match a Route</h2>
<p><strong>There's no API</strong>! <code>watchUrl</code> gives you back a <code>url</code> record of the following shape:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">type</span> url = {
  <span class="hljs-comment">/* path takes window.location.pathname, like "/book/title/edit" and turns it into `["book", "title", "edit"]` */</span>
  path: list(string),
  <span class="hljs-comment">/* the url's hash, if any. The # symbol is stripped out for you */</span>
  hash: string,
  <span class="hljs-comment">/* the url's query params, if any. The ? symbol is stripped out for you */</span>
  search: string
};
</code></pre>
<aside class="warning">
The Record API is in feature-freeze. For the newest features and better support going forward, please consider migrating to the new <a href="https://reasonml.github.io/docs/en/components">function componenents</a>.
</aside>
<p>So the url <code>www.hello.com/book/10/edit?name=Jane#author</code> is given back as:</p>
<pre><code class="hljs css language-reason">{
  path: <span class="hljs-literal">[</span><span class="hljs-string">"book"</span>, <span class="hljs-string">"10"</span>, <span class="hljs-string">"edit"</span><span class="hljs-literal">]</span>,
  hash: <span class="hljs-string">"author"</span>,
  search: <span class="hljs-string">"name=Jane"</span>
}
</code></pre>
<p>At this point, you can simply pattern match your way to glory!</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">let</span> watcherID = <span class="hljs-module-identifier">ReasonReact</span>.<span class="hljs-module-identifier">Router</span>.watchUrl(url =&gt; {
  <span class="hljs-keyword">switch</span> (url.path) {
  | <span class="hljs-literal">[</span><span class="hljs-string">"book"</span>, id, <span class="hljs-string">"edit"</span><span class="hljs-literal">]</span> =&gt; handleBookEdit(id)
  | <span class="hljs-literal">[</span><span class="hljs-string">"book"</span>, id<span class="hljs-literal">]</span> =&gt; getBook(id)
  | <span class="hljs-literal">[</span><span class="hljs-string">"book"</span>, id, _<span class="hljs-literal">]</span> =&gt; noSuchBookOperation()
  | <span class="hljs-literal">[</span><span class="hljs-literal">]</span> =&gt; showMainPage()
  | <span class="hljs-literal">[</span><span class="hljs-string">"shop"</span><span class="hljs-literal">]</span> | <span class="hljs-literal">[</span><span class="hljs-string">"shop"</span>, <span class="hljs-string">"index"</span><span class="hljs-literal">]</span> =&gt; showShoppingPage()
  | <span class="hljs-literal">[</span><span class="hljs-string">"shop"</span>, <span class="hljs-operator">...</span>rest<span class="hljs-literal">]</span> =&gt;
     <span class="hljs-comment">/* e.g. "shop/cart/10", but let "cart/10" be handled by another function */</span>
    nestedMatch(rest)
  | _ =&gt; showNotFoundPage()
  }
});

<span class="hljs-comment">/* some time later */</span>
<span class="hljs-module-identifier">ReasonReact</span>.<span class="hljs-module-identifier">Router</span>.unwatchUrl(watcherID);
</code></pre>
<p>So you can match a path, match a subset of a path, defer part of a matching to a nested logic, etc.</p>
<h3><a class="anchor" aria-hidden="true" id="tips-tricks"></a><a href="#tips-tricks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tips &amp; Tricks</h3>
<p>Notice that this is just normal <a href="https://reasonml.github.io/docs/en/pattern-matching.html">pattern matching</a>. You can combine it with other features, such as tuple + ReasonReact features like <a href="/reason-react/docs/fr/subscriptions-helper">subscriptions</a> and reducer:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">let</span> component = <span class="hljs-module-identifier">ReasonReact</span>.reducerComponent(<span class="hljs-string">"TodoApp"</span>);

<span class="hljs-keyword">let</span> make = _children =&gt; {
  <span class="hljs-operator">...</span>component,
  reducer: (action, state) =&gt;
    <span class="hljs-keyword">switch</span> (action) {
    <span class="hljs-comment">/* router actions */</span>
    | <span class="hljs-constructor">ShowAll</span> =&gt; <span class="hljs-module-identifier">ReasonReact</span>.<span class="hljs-constructor">Update</span>({<span class="hljs-operator">...</span>state, nowShowing: <span class="hljs-constructor">AllTodos</span>})
    | <span class="hljs-constructor">ShowActive</span> =&gt; <span class="hljs-comment">/* ... */</span>
    <span class="hljs-comment">/* todo actions */</span>
    | <span class="hljs-constructor">ChangeTodo</span>(text) =&gt; <span class="hljs-comment">/* ... */</span>
    },
  didMount: self =&gt; {
    <span class="hljs-keyword">let</span> watcherID = <span class="hljs-module-identifier">ReasonReact</span>.<span class="hljs-module-identifier">Router</span>.watchUrl(url =&gt; {
      <span class="hljs-keyword">switch</span> (url.hash, <span class="hljs-module-identifier">MyAppStatus</span>.isUserLoggedIn) {
      | (<span class="hljs-string">"active"</span>, _) =&gt; self.send(<span class="hljs-constructor">ShowActive</span>)
      | (<span class="hljs-string">"completed"</span>, _) =&gt; self.send(<span class="hljs-constructor">ShowCompleted</span>)
      | (<span class="hljs-string">"shared"</span>, <span class="hljs-literal">true</span>) =&gt; self.send(<span class="hljs-constructor">ShowShared</span>)
      | (<span class="hljs-string">"shared"</span>, <span class="hljs-literal">false</span>) when isSpecialUser =&gt; <span class="hljs-comment">/* handle this state please */</span>
      | (<span class="hljs-string">"shared"</span>, <span class="hljs-literal">false</span>) =&gt; <span class="hljs-comment">/* handle this state please */</span>
      | _ =&gt; self.send(<span class="hljs-constructor">ShowAll</span>)
      }
    });
    self.onUnmount(() =&gt; <span class="hljs-module-identifier">ReasonReact</span>.<span class="hljs-module-identifier">Router</span>.unwatchUrl(watcherID));
  },
  render: <span class="hljs-operator">...</span>
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="directly-get-a-route"></a><a href="#directly-get-a-route" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Directly Get a Route</h2>
<p>In one specific occasion, you might want to take hold of a <code>url</code> record <em>outside</em> of <code>watchUrl</code>. For example, if you've put <code>watchUrl</code> inside a component's <code>didMount</code> so that a URL change triggers a component state change, you might also want the initial state to be dictated by the URL.</p>
<p>In other words, you'd like to read from the <code>url</code> record once at the beginning of your app logic. We expose <code>dangerouslyGetInitialUrl()</code> for this purpose.</p>
<p><strong>Note</strong>: the reason why we label it as &quot;dangerous&quot; is to remind you <strong>not</strong> to read this <code>url</code> in any arbitrary component's e.g. <code>render</code>, since that information might be out of date if said component doesn't also contain a <code>watchUrl</code> subscription that re-renders the component when the URL changes. Aka, please only use <code>dangerouslyGetInitialUrl</code> alongside <code>watchUrl</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="push-a-new-route"></a><a href="#push-a-new-route" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Push a New Route</h2>
<p>From anywhere in your app, just call e.g. <code>ReasonReact.Router.push(&quot;/books/10/edit#validated&quot;)</code>. This will trigger a URL change (without a page refresh) and <code>watchUrl</code>'s callback will be called again.</p>
<p>We might provide better facilities for typed routing + payload carrying in the future!</p>
<p><strong>Note</strong>: because of browser limitations, changing the URL through JavaScript (aka <code>pushState</code>) <strong>cannot</strong> be detected. The solution is to change the URL then fire a <code>&quot;popState&quot;</code> event. This is what <code>Router.push</code> does, and what the event <code>watchUrl</code> listens to. So if, for whatever reason (e.g. incremental migration), you want to update the URL outside of <code>Router.push</code>, just do <code>window.dispatchEvent(new Event('popState'))</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="design-decisions"></a><a href="#design-decisions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Design Decisions</h2>
<p>We always strive to lower the performance and learning overhead in ReasonReact, and our router design's no different. The entire implementation, barring browser features detection, is around 20 lines. The design might seem obvious in retrospect, but to arrive here, we had to dig back into ReactJS internals &amp; future proposals to make sure we understood the state update mechanisms, the future context proposal, lifecycle ordering, etc. and reject some bad API designs along the way. It's nice to arrive at such an obvious solution!</p>
<p>The API also doesn't dictate whether matching on a route should return a component, a state update, or a side-effect. Flexible enough to slip into existing apps.</p>
<p>Performance-wise, a JavaScript-like API tends to use a JS object of route string -&gt; callback. We eschewed that in favor of pattern-matching, since the latter in Reason does not allocate memory, and is compiled to a fast jump table in C++ (through the JS JIT). In fact, the only allocation in the router matching is the creation of the <code>url</code> record!</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/reason-react/docs/fr/subscriptions-helper"><span class="arrow-prev">← </span><span>Subscriptions Helper</span></a><a class="docs-next button" href="/reason-react/docs/fr/im-having-a-type-error"><span>J&#x27;ai une erreur de type</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#match-a-route">Match a Route</a><ul class="toc-headings"><li><a href="#tips-amp-tricks">Tips &amp; Tricks</a></li></ul></li><li><a href="#directly-get-a-route">Directly Get a Route</a></li><li><a href="#push-a-new-route">Push a New Route</a></li><li><a href="#design-decisions">Design Decisions</a></li></ul></nav></div><span><script src="/reason-react/js/redirectBlog.js"></script><script>window.foo = new Pjax({
          areas: [
            // try to use the first query.
            '.mainContainer, .docsNavContainer .toc .navWrapper, .onPageNav',
            // fallback
            'body'
          ],
          link: '.docsNavContainer:not(.docsSliderActive) a',
          update: {
            script: false,
          }
        });
        var languagesMenuItemCopy = document.getElementById("languages-menu");
        languagesMenuItemCopy.addEventListener("click", function(e){
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
        });</script></span></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '55156da6520de795d3a2c2d23786f08e',
                indexName: 'react-reason',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["lang:fr"]}
              });
            </script></body></html>